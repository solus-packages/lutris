From 1be0d6e5404068f5eeb8f6849f59b52e879f662a Mon Sep 17 00:00:00 2001
From: Mathieu Comandon <strycore@gmail.com>
Date: Thu, 14 Jan 2021 18:44:58 -0800
Subject: [PATCH] Return empty list when dxvk versions aren't loaded

---
 lutris/util/wine/dxvk.py | 2 ++
 lutris/util/wine/wine.py | 2 --
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/lutris/util/wine/dxvk.py b/lutris/util/wine/dxvk.py
index b4fa546c7..73682a772 100644
--- a/lutris/util/wine/dxvk.py
+++ b/lutris/util/wine/dxvk.py
@@ -62,6 +62,8 @@ def dxvk_path(self):
 
     def load_dxvk_versions(self):
         versions_path = os.path.join(self.base_dir, "dxvk_versions.json")
+        if not system.path_exists(versions_path):
+            return []
         with open(versions_path, "r") as dxvk_version_file:
             dxvk_versions = [v["tag_name"] for v in json.load(dxvk_version_file)]
         return dxvk_versions
diff --git a/lutris/util/wine/wine.py b/lutris/util/wine/wine.py
index caed487b6..bf6b4084b 100644
--- a/lutris/util/wine/wine.py
+++ b/lutris/util/wine/wine.py
@@ -1,12 +1,10 @@
 """Utilities for manipulating Wine"""
-# Standard Library
 import os
 import subprocess
 from collections import OrderedDict
 from functools import lru_cache
 from gettext import gettext as _
 
-# Lutris Modules
 from lutris import runtime, settings
 from lutris.gui.dialogs import DontShowAgainDialog, ErrorDialog
 from lutris.runners.steam import steam
