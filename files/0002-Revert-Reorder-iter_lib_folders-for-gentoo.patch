From 0f433f49f5b8362f2fc9121c1e5e2973eaa4dbc8 Mon Sep 17 00:00:00 2001
From: Thomas Staudinger <Staudi.Kaos@gmail.com>
Date: Mon, 30 Sep 2019 20:20:27 +0200
Subject: [PATCH] Revert "Reorder iter_lib_folders() for gentoo."

This reverts commit 8a9bec84ed48332120692827005604d963db31a0 (breaks Wine launchers)
---
 lutris/util/linux.py | 17 ++++++++---------
 1 file changed, 8 insertions(+), 9 deletions(-)

diff --git a/lutris/util/linux.py b/lutris/util/linux.py
index 13cf7065..448d4402 100644
--- a/lutris/util/linux.py
+++ b/lutris/util/linux.py
@@ -277,9 +277,6 @@ class LinuxSystem:
     def iter_lib_folders(self):
         """Loop over existing 32/64 bit library folders"""
         exported_lib_folders = set()
-        for lib_folder in self.get_lib_folders():
-            exported_lib_folders.add(lib_folder)
-            yield lib_folder
         for lib_paths in self.multiarch_lib_folders:
             if self.arch != 'x86_64':
                 # On non amd64 setups, only the first element is relevant
@@ -289,12 +286,14 @@ class LinuxSystem:
                 if os.path.realpath(lib_paths[0]) == os.path.realpath(lib_paths[1]):
                     continue
             if all([os.path.exists(path) for path in lib_paths]):
-                if lib_paths[0] not in exported_lib_folders:
-                        yield lib_paths[0]
-                if len(lib_paths) != 1:
-                    if lib_paths[1] not in exported_lib_folders:
-                        yield lib_paths[1]
-    
+                exported_lib_folders.add(lib_paths[0])
+                yield lib_paths[0]
+                exported_lib_folders.add(lib_paths[1])
+                yield lib_paths[1]
+        for lib_folder in self.get_lib_folders():
+            if lib_folder not in exported_lib_folders:
+                yield lib_folder
+
     def get_ldconfig_libs(self):
         """Return a list of available libraries, as returned by `ldconfig -p`."""
         ldconfig = self.get("ldconfig")
-- 
2.23.0

